<script>
"use strict";!function(s){var u=/\([0-9]*?\)$/,n=/\r?\n|\r|\xa0|\u200B|&nbsp;| /g,c=/<\/?[a-z][\s\S]*>/i,f="__label:",m=[];function d(t){if(t&&t.includes("_")){var e=t.split("_");if(2===e.length)return e[1].trim()?e:[e[0]]}return[t]}function h(t){return t=t,(e=document.createElement("textarea")).innerHTML=t,e.value.trim().replace(u,"").replace(n,"").trim().toLocaleLowerCase();var e}function v(t){return t.trim().replace(n,"").trim().toLocaleLowerCase()}function g(t,e){return!t||!t.trim()||!(1!==t.trim().length||1===(n=t.trim()).length&&n.match(/[a-z]/i))||0===Object.keys(e.textTranslations).length?null:e.textTranslations[h(t)];var n}function x(t,e){return!t||!t.trim()||0===Object.keys(e.htmlTranslations).length||t.length>e.longestHtmlText+.2*e.longestHtmlText?null:e.htmlTranslations[v(t)]}function i(t){var o={},l={},s=0;return t.forEach(function(t){var i,e;!t||(i="string"==typeof(e=t)||e instanceof String?JSON.parse(t):t)&&Object.keys(i).forEach(function(t){if(t){var e=i[t];if(e)if(c.test(t))(n=v(t))!==e&&(l[n]=e,s<t.length&&(s=t.length));else{if(t.startsWith(f))return n=e.replace(f,""),r=t.replace(f,""),void(o[h(r)]=n);var n,r=d(t),a=d(e);r.length===a.length?r.forEach(function(t,e){t!==a[e]&&(o[h(t)]=a[e])}):(n=h(t))!==e&&(o[n]=e)}}})}),{hasTranslations:0<Object.keys(o).length+Object.keys(l).length,textTranslations:o,htmlTranslations:l,longestHtmlText:s}}function b(t,e){switch(t.tagName.toLowerCase()){case"a":return i=t,o=e.rootUrl,["href","data-href"].forEach(function(t){var e=i.getAttribute(t);if(!e)return!1;e.startsWith("/")&&!e.startsWith(o)&&(e="".concat(o).concat(e),i.setAttribute(t,e))}),l(t,["href","data-href"],e.translations);case"input":return n=t,r=e.translations,(a=n.getAttribute("type"))&&"submit"===a&&(a=g(n.getAttribute("value"),r))&&n.setAttribute("value",a),l(t,["placeholder"],e.translations);case"textarea":return l(t,["placeholder"],e.translations);case"img":return l(t,["src"],e.translations)}var n,r,a,i,o;return{isTranslated:!1}}function l(n,t,r){var a=!1;return t.forEach(function(t){var e=n.getAttribute(t);if(!e)return!1;e=g(e,r);return e?(n.setAttribute(t,e),a=!0):void 0}),{isTranslated:a}}function T(t,e,n,r){t.forEach(function(t){return function t(e,n,r,a){if(!e)return;if(-1<a.indexOf(e))return;a.push(e);if(e.nodeType===Node.COMMENT_NODE)return;if(e.tagName&&-1<r.excludeElements.indexOf(e.tagName.toLowerCase()))return;if("#text"===e.nodeName){if(null==(i=e.textContent)||!i.trim())return;var i=g(e.textContent,r.translations);return void(i&&(o=e.textContent.trim().replace(u,"").trim(),e.textContent=e.textContent.replace(o,i)))}e.tagName&&b(e,r);var o=e.querySelectorAll("textarea");o.forEach(function(t){return b(t,r)});i=[].slice.call(e.childNodes);if(1===i.length&&"#text"===i[0].nodeName)return void t(i[0],n++,r,a);{var l,s;1===r.alg?(o=!!i.find(function(t){return"#text"===t.nodeName&&(null==(t=null==(t=null==(t=t.textContent)?void 0:t.trim())?void 0:t.replace("(",""))?void 0:t.replace(")",""))}),l=[],o&&(l=i.filter(function(t){return"#text"===t.nodeName&&g(t.textContent,r.translations)})),0<e.childNodes.length&&(!o||0<l.length)?T(i,n++,r,a):e.innerHTML&&(s=x(e.innerHTML,r.translations))&&(e.innerHTML=s)):(o=!1,e.innerHTML&&(s=x(e.innerHTML,r.translations))&&(e.innerHTML=s,o=!0),o||T(i,n++,r,a))}}(t,e,n,r)})}function t(t,e,n,r,a){var o,l;void 0===a&&(a=1),n||(n=i(r)).hasTranslations&&(o={alg:a,translations:n,excludeElements:["html","head","body","script","noscript","style","iframe","canvas","svg"],locale:t,rootUrl:e},l={alg:a,translations:n,excludeElements:[],locale:t,rootUrl:e},new MutationObserver(function(t,e){var a=t.map(function(t){return t.target}).filter(function(t,e,n){return t.textContent&&n.indexOf(t)===e}),i=[];s.requestAnimationFrame(function n(r){return function(){var t=r+500,e=a.slice(r,t);0<e.length&&(T(e,0,o,i),s.requestAnimationFrame(n(t)))}}(0));var n,t=document.querySelectorAll("iframe");n=l,t.forEach(function(t){!t||!t.contentDocument||m.includes(t)||t.id&&"admin-bar-iframe"===t.id||(m.push(t),t=t.contentDocument.documentElement,new MutationObserver(function(t,e){T(t.map(function(t){return t.target}).filter(function(t,e,n){return t.textContent&&n.indexOf(t)===e}),0,n,[])}).observe(t,{attributes:!0,childList:!0,subtree:!0}))})}).observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0}))}void 0===s.TranslationLab&&(s.TranslationLab={}),void 0===s.TranslationLab.CustomTranslations&&(s.TranslationLab.CustomTranslations={apply:t})}(window);
</script>

<script>

{%- assign indexes = shop.metafields['tlab_translations']['index'].value -%}
{%- capture translations_metadata -%}
[{%- for mfReference in indexes -%}
{%- if mfReference.templateSuffix == blank or mfReference.templateSuffix == template.suffix or template.name == 'index' and mfReference.templateSuffix contains 'home' -%}
{%- if mfReference.templateNames.size == 0 or mfReference.templateNames contains template.name -%}
{%- assign mfRef = shop.metafields[mfReference.metafieldNamespace][mfReference.metafieldKey].value | json -%}
{{- mfRef -}}
{%- endif -%}
{%- endif -%}
{%- unless forloop.last %},{% endunless %}{%- endfor %}
{%- if template contains 'product' -%}
{%- assign productCustomTranslationMetafield = product.metafields['tlab_translations']['judgeMe'].value | json -%}
,{{- productCustomTranslationMetafield -}}
{%- endif -%}]
{%- endcapture %}

{%- assign langPrefix = localization.language.root_url %}{% if langPrefix == '/' %}{% assign langPrefix = '' %}{% endif %}
  
var translationsMetadata = {{ translations_metadata }}

var locale = '{{ request.locale.iso_code }}';

var isPrimaryLocale = {{ request.locale.primary | json }};

var rootUrl = '{{ langPrefix }}';

var nodeProcessingType = window.TranslationLabOptions && window.TranslationLabOptions.nodeProcessingType;

TranslationLab.CustomTranslations.apply(locale, rootUrl, isPrimaryLocale, translationsMetadata, nodeProcessingType);

</script>